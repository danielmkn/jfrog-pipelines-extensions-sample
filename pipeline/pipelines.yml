resources:
  - name: extensionSources
    type: GitRepo
    configuration:
      path: danielmkn/jfrog-pipelines-extensions-sample    # <-- branch testing is used
      gitProvider: danielMiakotkinGitHub                   # <-- account should have and admin access to the repo
  # Connection of Extension resource
  - name: gkeClusterResource
    type: tutorials/gkeClusterResource
    configuration:
      googleCloudProj: "jfrog-partnership-team"
      gkeClusterZone: "us-central1-c"
      gkeClusterName: "jf-prometheus-grafana"
      googleCloudAuth: gcpK8sPartnershipProject

pipelines:
  - name: daniel_gke_create_cluster
    configuration:
      environmentVariables:
        readOnly:
          my_env_var: "hello"
    steps:
      - name: Create_GKE_Cluster
        type: tutorials/gkeCreateCluster
        configuration:
          integrations:
            - name: gcpK8sPartnershipProject
          notifyOnSuccess: false
          notifyOnFailure: false
          googleCloudProj: "jfrog-partnership-team"
          gkeClusterZone: "us-central1-c"
          gkeClusterName: "created-by-pipelines-extension"
          num-nodes: 6
          machine-type: "n1-standard-1"
          min-nodes: 1
          max-nodes: 12
          clusterOptions: "--enable-autoscaling"
          inputResources:
            - name: gkeClusterResource
            - name: extensionSources
          outputResources:
            - name: gkeClusterResource
            #- name: extensionSources
            #- name: gcpK8sPartnershipProject
